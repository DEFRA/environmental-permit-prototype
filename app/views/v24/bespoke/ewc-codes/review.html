{% extends "layout.html" %}

{% block pageTitle %}
    {{title}} - GOV.UK
{% endblock %}

{% block beforeContent %}
{% include "includes/phase_banner_beta.html" %}
{{backlink|safe}}

{% endblock %}

{% block content %}

  

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">   
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
        {{title}}
    </legend>

    <table class="govuk-table">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">EWC description</th>
          <th scope="col" class="govuk-table__header govuk-!-width-one-quarter">EWC code</th>
          {% if not editMode %}
          <th scope="col" class="govuk-table__header">{% if editVersion === 'mega-edit' %}<a href="mega-edit/mega-edit">Edit</a>{% endif %}</th>
          {% endif %}
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        {% for ewcCode in ewcCodes %}
        <tr class="govuk-table__row">

          {% if editMode === 'mega-edit' %}
          <td class="govuk-table__cell"><textarea class="govuk-textarea" rows="2">{{ ewcCode.description }}</textarea></td>
          <td class="govuk-table__cell"><input type="text" class="govuk-input" style="margin-bottom: 50px" value="{{ ewcCode.code }}"></textarea></td>
          {% elif editMode === 'mini-edit' and editRow == loop.index %}
          <td class="govuk-table__cell table-no-border">{{ ewcCode.description }}</td>
          <td class="govuk-table__cell table-no-border">{{ ewcCode.code }}</td>
          {% else %}
          <td class="govuk-table__cell">{{ ewcCode.description }}</td>
          <td class="govuk-table__cell">{{ ewcCode.code }}</td>
          {% if editMode !== 'mini-edit' %}
          <td class="govuk-table__cell">{% if editVersion === 'mini-edit' %}<a href="mini-edit/mini-edit/{{ loop.index }}">Edit</a>{% endif %}</td>
          {% endif %}
          {% endif %}
        </tr>
        {% if editMode === 'mini-edit' and editRow == loop.index %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">
            <label class="govuk-hint" for="ewc-description">New description</label>
            <input class="govuk-input" id="ewc-description" type="text"/>
          </td>
          <td class="govuk-table__cell">
            <label class="govuk-hint" for="ewc-code">New code</label>
            <input class="govuk-input" id="ewc-code" type="text"/>
          </td>
        </tr> 
        {% endif %}
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
  
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <form method="post" action="{{formAction}}">

      {% if enterOrUpload === 'enter' %}
      <div class="govuk-checkboxes" data-module="checkboxes">
        <div class="govuk-checkboxes__item">
          <input class="govuk-checkboxes__input" id="re-enter-ewc-codes" name="redoEwcCodes" type="checkbox" data-aria-controls="conditional-input-ewc-codes">
          <label class="govuk-label govuk-checkboxes__label" for="re-enter-ewc-codes">
              Re-enter all EWC codes for this activity
          </label>
        </div>

        <div class="govuk-checkboxes__conditional govuk-checkboxes__conditional--hidden" id="conditional-input-ewc-codes">
            <div class="govuk-form-group">
                <label class="govuk-label" for="input-ewc-codes">
                  add guidance on how to choose and enter the EWC codes
                  <br/>
                  <a href="#">Read about how to choose EWC codes on GOV.UK (opens new tab)</a>
                </label>
                
                <textarea class="govuk-textarea" name="inputEwcCodes" type="text" id="input-ewc-codes" rows="5"></textarea>
            </div>
        </div>
      </div>
      {% endif %}
      {% if enterOrUpload === 'upload' %}
      <div class="govuk-checkboxes" data-module="checkboxes">
          <div class="govuk-checkboxes__item">
            <input class="govuk-checkboxes__input" id="re-enter-ewc-codes" name="redoEwcCodes" type="checkbox" data-aria-controls="conditional-upload-ewc-codes">
            <label class="govuk-label govuk-checkboxes__label" for="re-enter-ewc-codes">
                Re-upload all EWC codes for this activity
            </label>
          </div>
  
          <div class="govuk-checkboxes__conditional govuk-checkboxes__conditional--hidden" id="conditional-upload-ewc-codes">
              <div class="govuk-form-group">
                  <label class="govuk-label" for="input-ewc-codes">
                    Some guidance on uploading files
                  </label>
                  
                  <p class="upload_head">Upload a file</p>
                  <p class="text govuk-hint">
                    CSV files<br>
                    30MB maximum per file
                  </p>
              
                  <div class="form-group form-uploader">
                      <input id="upload" type="file" aria-labelelledby="upload-label">
                      <input id="filename" name="{{currentFileName}}" type="hidden">
                  </div>
              </div>
          </div>
        </div>  
        {% endif %}
      <br/>

      <div class="form-group">
        {{submitButton|safe}}
      </div>
    </form>
  </div>
</div>

{% endblock %}
